{"ast":null,"code":"import _regeneratorRuntime from\"F:/dev/alex/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"F:/dev/alex/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/dev/alex/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";import xtype from'xtypejs';import\"./ViewExpenses.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ViewExpenseData(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),Etype=_useState2[0],setEtype=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),Eprice=_useState4[0],setEprice=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),selectData=_useState8[0],setSelectData=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),jsonData=_useState10[0],setJsonData=_useState10[1];useEffect(function(){var processing=true;axiosFetchData(processing);return function(){processing=false;};},[]);var axiosFetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(processing){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:4000/expenses\").then(function(res){if(processing){setSelectData(res.data);}}).catch(function(err){return console.log(err);});case 2:case\"end\":return _context.stop();}},_callee);}));return function axiosFetchData(_x){return _ref.apply(this,arguments);};}();var axiosPostData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var postData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:postData={Etype:Etype,Eprice:Eprice};_context2.next=3;return axios.post(\"http://localhost:4000/expenses\",postData).then(function(res){return setError(/*#__PURE__*/_jsx(\"p\",{className:\"success\",children:res.data}));});case 3:case\"end\":return _context2.stop();}},_callee2);}));return function axiosPostData(){return _ref2.apply(this,arguments);};}();// axiosFetchData();\nvar deleteExpense=function deleteExpense(id,name){if(window.confirm(\"Are you sure you want to delete \".concat(name,\"?\"))){fetch(\"http://localhost:4000/deleteExpense\",{method:\"POST\",crossDomain:true,headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\",\"Access-Control-Allow-Origin\":\"*\"},body:JSON.stringify({expenseid:id})}).then(function(res){return res.json();}).then(function(data){alert(data.data);});alert(\"Deleted Expense\");window.location.reload(false);}else{alert(\"Did Not Delete Expense\");}};//console.log(selectData[2]?.Etype);\n/*\r\n   function Seedata(){\r\n    let strings = []\r\n    for(let i = 0; i < selectData.length; i++){\r\n        let thestring = `${selectData[i]?.Etype}: $${selectData[i]?.Eprice}\\n`\r\n        strings.push(thestring)\r\n\r\n\r\n    }\r\n    console.log(strings)\r\n    return(strings.map((string, index) => {\r\n        return (<p key={index}>{string}<button onClick={()=>deleteExpense(string)}>Delete</button></p>)\r\n\r\n\r\n    }))\r\n\r\n   }\r\n   */function Seedata(){if(selectData.length===0){return/*#__PURE__*/_jsx(\"div\",{children:\"No Data\"});}return/*#__PURE__*/_jsx(\"div\",{children:Object.keys(selectData).map(function(key,i){return/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Expense Type: \",selectData[key].Etype]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Expense Price: $\",selectData[key].Eprice]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteExpense(selectData[key]._id,selectData[key].Etype);},children:\"Delete\"})]},i);})});}/*\r\n    function Seedata(){\r\n\r\n    let string = \"\";\r\n\r\n    \r\n     for(let i = 0; i < selectData.length; i++)\r\n     {\r\n\r\n        string = string + `${selectData[i]?.Etype}: $${selectData[i]?.Eprice}\\n`\r\n        \r\n\r\n\r\n     }\r\n     return(string);\r\n    }\r\n    */ /*\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        if(!Eprice && ! Etype){\r\n\r\n            setError(<p className=\"required\">Both fields are empty</p>)\r\n\r\n        }\r\n\r\n        else if(!Etype)\r\n        {\r\n            setError(<p className=\"required\">Etype is empty</p>)\r\n\r\n\r\n        }\r\n        else if (!Eprice){\r\n\r\n            setError(<p className=\"required\">Eprice is empty</p>)\r\n        }\r\n        else{\r\n            setError(<p>message sent</p>)\r\n\r\n        }\r\n        setError('')\r\n        axiosFetchData()\r\n        \r\n    }\r\n\r\n*/return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Test\"}),/*#__PURE__*/_jsx(\"div\",{className:\"scrollbox\",children:Seedata()})]});}","map":{"version":3,"names":["useState","useEffect","axios","xtype","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ViewExpenseData","_useState","_useState2","_slicedToArray","Etype","setEtype","_useState3","_useState4","Eprice","setEprice","_useState5","_useState6","error","setError","_useState7","_useState8","selectData","setSelectData","_useState9","_useState10","jsonData","setJsonData","processing","axiosFetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","get","then","res","data","catch","err","console","log","stop","_x","apply","arguments","axiosPostData","_ref2","_callee2","postData","_callee2$","_context2","post","className","children","deleteExpense","id","name","window","confirm","concat","fetch","method","crossDomain","headers","Accept","body","JSON","stringify","expenseid","json","alert","location","reload","Seedata","length","Object","keys","map","key","i","onClick","_id"],"sources":["F:/dev/alex/src/ViewExpenseData.js"],"sourcesContent":["import {useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport xtype from 'xtypejs';\r\nimport \"./ViewExpenses.css\";\r\n\r\n\r\nexport default function ViewExpenseData(){\r\n\r\n\r\n    const [Etype, setEtype] = useState(\"\");\r\n    const [Eprice, setEprice] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const [selectData, setSelectData] = useState(\"\");\r\n    const [jsonData, setJsonData] = useState(\"\");\r\n    \r\n    \r\n\r\n\r\n\r\n    useEffect( ()=> {\r\n        let processing = true;\r\n        axiosFetchData(processing);\r\n        return () => {\r\n            processing = false;\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n    }, [])\r\n\r\n\r\n    const axiosFetchData = async(processing) => {\r\n        \r\n\r\n        await axios.get(\"http://localhost:4000/expenses\")\r\n        .then(res => {\r\n\r\n            if(processing){\r\n                setSelectData(res.data)\r\n              \r\n\r\n            }\r\n\r\n\r\n        })\r\n        .catch(err => console.log(err))\r\n        //let Myobject = JSON.parse(selectData)\r\n        \r\n        \r\n      //  console.log(Dataarray)\r\n\r\n        //setJsonData(JSON.stringify(selectData));\r\n        \r\n       // setJsonData(JSON.stringify(selectData));\r\n        \r\n      //  console.log(Array.isArray(jsonData));\r\n       \r\n        // const result = Array.from(selectData).map();\r\n        //console.log(result);\r\n       \r\n        \r\n       // console.log(selectData)\r\n        \r\n    }\r\n    \r\n\r\n    const axiosPostData = async() => {\r\n        const postData = {\r\n            Etype: Etype,\r\n            Eprice: Eprice\r\n\r\n        }\r\n        await axios.post(\"http://localhost:4000/expenses\", postData)\r\n        .then(res => setError(<p className=\"success\">{res.data}</p>))\r\n\r\n\r\n\r\n    }\r\n   // axiosFetchData();\r\n\r\n\r\n\r\n\r\n   const deleteExpense = (id, name) =>{\r\n\r\n        \r\n        if(window.confirm(`Are you sure you want to delete ${name}?`))\r\n        {\r\n            fetch(\"http://localhost:4000/deleteExpense\", {\r\n                method: \"POST\",\r\n                crossDomain: true,\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Accept: \"application/json\",\r\n                    \"Access-Control-Allow-Origin\": \"*\",\r\n\r\n                },\r\n                body: JSON.stringify({\r\n                    \r\n                    expenseid: id\r\n\r\n                }),\r\n            })\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                alert(data.data);\r\n            });\r\n            alert(\"Deleted Expense\");\r\n            window.location.reload(false)\r\n            \r\n            \r\n\r\n        }else{\r\n            alert(\"Did Not Delete Expense\")\r\n\r\n\r\n        }\r\n        \r\n    \r\n\r\n   }\r\n\r\n\r\n   //console.log(selectData[2]?.Etype);\r\n/*\r\n   function Seedata(){\r\n    let strings = []\r\n    for(let i = 0; i < selectData.length; i++){\r\n        let thestring = `${selectData[i]?.Etype}: $${selectData[i]?.Eprice}\\n`\r\n        strings.push(thestring)\r\n\r\n\r\n    }\r\n    console.log(strings)\r\n    return(strings.map((string, index) => {\r\n        return (<p key={index}>{string}<button onClick={()=>deleteExpense(string)}>Delete</button></p>)\r\n\r\n\r\n    }))\r\n\r\n   }\r\n   */\r\n   function Seedata(){\r\n    if(selectData.length === 0)\r\n    {\r\n    return(<div>No Data</div>)\r\n    }\r\n    return(<div>\r\n        {Object.keys(selectData).map((key, i) => (\r\n            <p key = {i}>\r\n\r\n                <span>Expense Type: {selectData[key].Etype}</span>\r\n                <br/>\r\n                <span>Expense Price: ${selectData[key].Eprice}</span>\r\n                <br/>\r\n                <button onClick={()=> deleteExpense(selectData[key]._id, selectData[key].Etype)}>Delete</button>\r\n\r\n\r\n\r\n            </p>\r\n\r\n\r\n\r\n\r\n        ))}\r\n\r\n\r\n\r\n    </div>\r\n    )\r\n\r\n\r\n\r\n   }\r\n   \r\n\r\n\r\n/*\r\n    function Seedata(){\r\n\r\n    let string = \"\";\r\n\r\n    \r\n     for(let i = 0; i < selectData.length; i++)\r\n     {\r\n\r\n        string = string + `${selectData[i]?.Etype}: $${selectData[i]?.Eprice}\\n`\r\n        \r\n\r\n\r\n     }\r\n     return(string);\r\n    }\r\n    */\r\n\r\n/*\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        if(!Eprice && ! Etype){\r\n\r\n            setError(<p className=\"required\">Both fields are empty</p>)\r\n\r\n        }\r\n\r\n        else if(!Etype)\r\n        {\r\n            setError(<p className=\"required\">Etype is empty</p>)\r\n\r\n\r\n        }\r\n        else if (!Eprice){\r\n\r\n            setError(<p className=\"required\">Eprice is empty</p>)\r\n        }\r\n        else{\r\n            setError(<p>message sent</p>)\r\n\r\n        }\r\n        setError('')\r\n        axiosFetchData()\r\n        \r\n    }\r\n\r\n*/\r\n    \r\n    \r\n\r\n\r\n    return(\r\n        <>\r\n            <h1>Test</h1>\r\n            <div className=\"scrollbox\">\r\n            \r\n            {Seedata()}\r\n            \r\n\r\n            </div>\r\n        \r\n        \r\n        \r\n        \r\n        </>\r\n\r\n\r\n\r\n\r\n    )\r\n    \r\n\r\n\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}